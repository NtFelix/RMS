/* TipTap Mention Suggestion Modal Styles */

/* Base suggestion modal container */
.mention-suggestion-modal {
  @apply bg-popover text-popover-foreground rounded-lg border shadow-lg;
  @apply w-full max-w-xs p-1;
  max-height: 20rem; /* 320px */
  
  /* Advanced scrollbar styling */
  &::-webkit-scrollbar {
    width: 8px;
  }

  &::-webkit-scrollbar-track {
    @apply bg-transparent;
  }

  &::-webkit-scrollbar-thumb {
    @apply bg-muted-foreground/30 rounded-full border-2 border-solid border-transparent;
    background-clip: content-box;
  }

  &::-webkit-scrollbar-thumb:hover {
    @apply bg-muted-foreground/50;
  }
}


/* Category header styling */
.mention-category-header {
  @apply px-2.5 py-1.5 text-xs font-semibold text-muted-foreground;
  @apply flex items-center gap-2 sticky top-0;
  @apply bg-popover/90 backdrop-blur-sm z-10;
  
  /* Prevent text selection */
  user-select: none;
  -webkit-user-select: none;
}

.mention-category-icon {
  @apply h-4 w-4 flex-shrink-0;
}

/* Category-specific icon colors */
.mention-category-mieter .mention-category-icon {
  @apply text-blue-600;
}

.mention-category-wohnung .mention-category-icon {
  @apply text-green-600;
}

.mention-category-haus .mention-category-icon {
  @apply text-purple-600;
}

.mention-category-datum .mention-category-icon {
  @apply text-orange-600;
}

.mention-category-vermieter .mention-category-icon {
  @apply text-indigo-600;
}

/* Dark mode category icon colors */
.dark .mention-category-mieter .mention-category-icon {
  @apply text-blue-400;
}

.dark .mention-category-wohnung .mention-category-icon {
  @apply text-green-400;
}

.dark .mention-category-haus .mention-category-icon {
  @apply text-purple-400;
}

.dark .mention-category-datum .mention-category-icon {
  @apply text-orange-400;
}

.dark .mention-category-vermieter .mention-category-icon {
  @apply text-indigo-400;
}

/* Suggestion item base styling */
.mention-suggestion-item {
  @apply px-2.5 py-2 rounded-md cursor-pointer transition-colors;
  @apply text-sm flex flex-col;
  @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-ring;
}

/* Hover and selected states */
.mention-suggestion-item:hover,
.mention-suggestion-item.selected {
  @apply bg-accent text-accent-foreground;
}


/* Item label styling */
.mention-suggestion-label {
  @apply font-medium;
  
  /* Highlight matching text */
  mark {
    @apply bg-transparent text-primary font-semibold;
  }
}

/* Item description styling */
.mention-suggestion-description {
  @apply text-xs text-muted-foreground;
  
  /* Highlight matching text in description */
  mark {
    @apply bg-transparent text-accent-foreground/80;
  }
}

/* Empty state styling */
.mention-suggestion-empty {
  @apply px-3 py-4 text-sm text-muted-foreground text-center;
  @apply flex flex-col items-center gap-2;
}

.mention-suggestion-empty-icon {
  @apply h-8 w-8 text-muted-foreground/50;
}

.mention-suggestion-empty-text {
  @apply font-medium;
}

.mention-suggestion-empty-subtext {
  @apply text-xs text-muted-foreground/70;
}

/* Loading state styling */
.mention-suggestion-loading {
  @apply px-3 py-4 text-sm text-muted-foreground text-center;
  @apply flex items-center justify-center gap-2;
}

.mention-suggestion-loading-spinner {
  @apply h-4 w-4 animate-spin text-muted-foreground;
}

.mention-suggestion-loading-text {
  @apply font-medium;
}

/* Skeleton loading for items */
.mention-suggestion-skeleton {
  @apply px-3 py-2 ml-2 animate-pulse;
}

.mention-suggestion-skeleton-label {
  @apply h-4 bg-muted rounded w-24 mb-1;
}

.mention-suggestion-skeleton-description {
  @apply h-3 bg-muted/60 rounded w-32;
}

/* Responsive design adjustments */
@media (max-width: 640px) {
  .mention-suggestion-modal {
    @apply max-w-xs max-h-64;
  }
  
  .mention-suggestion-item {
    @apply px-2 py-2.5;
    @apply min-h-[48px];
  }
  
  .mention-category-header {
    @apply px-2 py-2;
  }
  
  .mention-suggestion-label {
    @apply text-sm;
  }
  
  .mention-suggestion-description {
    @apply text-xs;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .mention-suggestion-item:hover {
    @apply bg-accent border-l-accent-foreground;
  }
  
  .mention-suggestion-item.selected {
    @apply bg-primary text-primary-foreground;
    @apply border-l-primary-foreground;
  }
  
  .mention-category-header {
    @apply border-b-2;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .mention-suggestion-modal {
    @apply animate-none;
  }
  
  .mention-suggestion-item {
    transition: none;
  }
  
  .mention-suggestion-item:hover,
  .mention-suggestion-item.selected {
    transform: none;
  }
  
  .mention-suggestion-loading-spinner {
    @apply animate-none;
  }
}

/* Focus-visible enhancement for keyboard navigation */
.mention-suggestion-item:focus-visible {
  @apply ring-2 ring-ring ring-offset-2;
  @apply bg-accent text-accent-foreground;
}

/* Tippy.js theme integration */
.tippy-box[data-theme~='mention-suggestion'] {
  @apply bg-transparent shadow-none;
  padding: 0;
}

.tippy-box[data-theme~='mention-suggestion'] .tippy-content {
  padding: 0;
}

/* Dark mode enhancements */
.dark .mention-suggestion-modal {
  @apply shadow-2xl border-border/50;
}

.dark .mention-category-header {
  @apply bg-popover/90;
}

.dark .mention-suggestion-item:hover {
  @apply bg-accent/90;
}

.dark .mention-suggestion-item.selected {
  @apply bg-accent ring-ring/50;
}

/* Print styles (hide suggestion modal) */
@media print {
  .mention-suggestion-modal {
    display: none !important;
  }
}

/* Animation keyframes for enhanced interactions */
@keyframes mention-suggestion-slide-in {
  from {
    opacity: 0;
    transform: translateY(-8px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes mention-suggestion-slide-out {
  from {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  to {
    opacity: 0;
    transform: translateY(-8px) scale(0.95);
  }
}

/* Enhanced animation classes */
.mention-suggestion-enter {
  animation: mention-suggestion-slide-in 200ms cubic-bezier(0.4, 0, 0.2, 1);
}

.mention-suggestion-exit {
  animation: mention-suggestion-slide-out 150ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* Accessibility enhancements */
.mention-suggestion-item[aria-selected="true"] {
  @apply bg-accent text-accent-foreground;
}

.mention-suggestion-item[aria-disabled="true"] {
  @apply opacity-50 cursor-not-allowed;
  pointer-events: none;
}

/* Custom focus ring for better visibility */
.mention-suggestion-focus-ring {
  @apply ring-2 ring-ring ring-offset-2 ring-offset-background;
}

/* Smooth scroll behavior for keyboard navigation */
.mention-suggestion-modal.keyboard-navigation {
  scroll-behavior: smooth;
}

/* Enhanced visual feedback for touch devices */
@media (hover: none) and (pointer: coarse) {
  .mention-suggestion-item:active {
    @apply bg-accent/90 scale-[0.97];
  }
}