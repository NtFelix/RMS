/* TipTap Mention Suggestion Modal Styles */

/* Base suggestion modal container */
.mention-suggestion-modal {
  @apply bg-popover border border-border rounded-md shadow-lg;
  @apply w-full max-w-sm max-h-80 overflow-y-auto;
  @apply py-1 focus:outline-none;
  @apply animate-in fade-in-0 zoom-in-95 duration-200;
  
  /* Ensure proper z-index for Tippy.js */
  z-index: 9999;
  
  /* Smooth scrolling */
  scroll-behavior: smooth;
  
  /* Custom scrollbar styling */
  scrollbar-width: thin;
  scrollbar-color: hsl(var(--muted)) transparent;
}

.mention-suggestion-modal::-webkit-scrollbar {
  width: 6px;
}

.mention-suggestion-modal::-webkit-scrollbar-track {
  background: transparent;
}

.mention-suggestion-modal::-webkit-scrollbar-thumb {
  background-color: hsl(var(--muted));
  border-radius: 3px;
}

.mention-suggestion-modal::-webkit-scrollbar-thumb:hover {
  background-color: hsl(var(--muted-foreground) / 0.5);
}

/* Category header styling */
.mention-category-header {
  @apply px-3 py-1.5 text-xs font-medium text-muted-foreground;
  @apply flex items-center gap-2 sticky top-0;
  @apply bg-popover/95 backdrop-blur-sm border-b border-border/50;
  
  /* Prevent text selection */
  user-select: none;
  -webkit-user-select: none;
}

.mention-category-icon {
  @apply h-3 w-3 flex-shrink-0;
  transition: color 150ms ease;
}

/* Category-specific icon colors */
.mention-category-mieter .mention-category-icon {
  @apply text-blue-600;
}

.mention-category-wohnung .mention-category-icon {
  @apply text-green-600;
}

.mention-category-haus .mention-category-icon {
  @apply text-purple-600;
}

.mention-category-datum .mention-category-icon {
  @apply text-orange-600;
}

.mention-category-vermieter .mention-category-icon {
  @apply text-indigo-600;
}

/* Dark mode category icon colors */
.dark .mention-category-mieter .mention-category-icon {
  @apply text-blue-400;
}

.dark .mention-category-wohnung .mention-category-icon {
  @apply text-green-400;
}

.dark .mention-category-haus .mention-category-icon {
  @apply text-purple-400;
}

.dark .mention-category-datum .mention-category-icon {
  @apply text-orange-400;
}

.dark .mention-category-vermieter .mention-category-icon {
  @apply text-indigo-400;
}

/* Category separator */
.mention-category-separator {
  @apply border-t border-border/60 my-1 mx-2;
}

/* Suggestion item base styling */
.mention-suggestion-item {
  @apply px-3 py-2 cursor-pointer transition-all duration-150;
  @apply text-sm ml-2 relative;
  @apply min-h-[44px] sm:min-h-0 flex flex-col justify-center;
  @apply focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2;
  @apply border-l-2 border-transparent;
  
  /* Smooth transitions */
  transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* Hover state */
.mention-suggestion-item:hover {
  @apply bg-accent/80 text-accent-foreground;
  @apply border-l-accent-foreground/20;
  transform: translateX(2px);
}

/* Selected state */
.mention-suggestion-item.selected {
  @apply bg-accent text-accent-foreground;
  @apply ring-2 ring-ring ring-offset-1;
  @apply border-l-primary;
  @apply shadow-sm;
  transform: translateX(2px);
}

/* Active state (when clicked) */
.mention-suggestion-item:active {
  @apply scale-[0.98];
  transition: transform 100ms ease;
}

/* Item label styling */
.mention-suggestion-label {
  @apply font-medium leading-tight;
  @apply text-foreground;
  
  /* Highlight matching text */
  mark {
    @apply bg-primary/20 text-primary font-semibold;
    @apply px-0.5 rounded-sm;
  }
}

/* Item description styling */
.mention-suggestion-description {
  @apply text-xs text-muted-foreground mt-0.5;
  @apply line-clamp-1 leading-relaxed;
  
  /* Highlight matching text in description */
  mark {
    @apply bg-muted text-muted-foreground font-medium;
    @apply px-0.5 rounded-sm;
  }
}

/* Selected item description enhancement */
.mention-suggestion-item.selected .mention-suggestion-description {
  @apply text-accent-foreground/80;
}

/* Empty state styling */
.mention-suggestion-empty {
  @apply px-3 py-4 text-sm text-muted-foreground text-center;
  @apply flex flex-col items-center gap-2;
}

.mention-suggestion-empty-icon {
  @apply h-8 w-8 text-muted-foreground/50;
}

.mention-suggestion-empty-text {
  @apply font-medium;
}

.mention-suggestion-empty-subtext {
  @apply text-xs text-muted-foreground/70;
}

/* Loading state styling */
.mention-suggestion-loading {
  @apply px-3 py-4 text-sm text-muted-foreground text-center;
  @apply flex items-center justify-center gap-2;
}

.mention-suggestion-loading-spinner {
  @apply h-4 w-4 animate-spin text-muted-foreground;
}

.mention-suggestion-loading-text {
  @apply font-medium;
}

/* Skeleton loading for items */
.mention-suggestion-skeleton {
  @apply px-3 py-2 ml-2 animate-pulse;
}

.mention-suggestion-skeleton-label {
  @apply h-4 bg-muted rounded w-24 mb-1;
}

.mention-suggestion-skeleton-description {
  @apply h-3 bg-muted/60 rounded w-32;
}

/* Responsive design adjustments */
@media (max-width: 640px) {
  .mention-suggestion-modal {
    @apply max-w-xs max-h-64;
  }
  
  .mention-suggestion-item {
    @apply px-2 py-2.5;
    @apply min-h-[48px];
  }
  
  .mention-category-header {
    @apply px-2 py-2;
  }
  
  .mention-suggestion-label {
    @apply text-sm;
  }
  
  .mention-suggestion-description {
    @apply text-xs;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .mention-suggestion-item:hover {
    @apply bg-accent border-l-accent-foreground;
  }
  
  .mention-suggestion-item.selected {
    @apply bg-primary text-primary-foreground;
    @apply border-l-primary-foreground;
  }
  
  .mention-category-header {
    @apply border-b-2;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .mention-suggestion-modal {
    @apply animate-none;
  }
  
  .mention-suggestion-item {
    transition: none;
  }
  
  .mention-suggestion-item:hover,
  .mention-suggestion-item.selected {
    transform: none;
  }
  
  .mention-suggestion-loading-spinner {
    @apply animate-none;
  }
}

/* Focus-visible enhancement for keyboard navigation */
.mention-suggestion-item:focus-visible {
  @apply ring-2 ring-ring ring-offset-2;
  @apply bg-accent text-accent-foreground;
}

/* Tippy.js theme integration */
.tippy-box[data-theme~='mention-suggestion'] {
  @apply bg-transparent shadow-none;
  padding: 0;
}

.tippy-box[data-theme~='mention-suggestion'] .tippy-content {
  padding: 0;
}

/* Dark mode enhancements */
.dark .mention-suggestion-modal {
  @apply shadow-2xl border-border/50;
}

.dark .mention-category-header {
  @apply bg-popover/90;
}

.dark .mention-suggestion-item:hover {
  @apply bg-accent/90;
}

.dark .mention-suggestion-item.selected {
  @apply bg-accent ring-ring/50;
}

/* Print styles (hide suggestion modal) */
@media print {
  .mention-suggestion-modal {
    display: none !important;
  }
}

/* Animation keyframes for enhanced interactions */
@keyframes mention-suggestion-slide-in {
  from {
    opacity: 0;
    transform: translateY(-8px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes mention-suggestion-slide-out {
  from {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
  to {
    opacity: 0;
    transform: translateY(-8px) scale(0.95);
  }
}

/* Enhanced animation classes */
.mention-suggestion-enter {
  animation: mention-suggestion-slide-in 200ms cubic-bezier(0.4, 0, 0.2, 1);
}

.mention-suggestion-exit {
  animation: mention-suggestion-slide-out 150ms cubic-bezier(0.4, 0, 0.2, 1);
}

/* Accessibility enhancements */
.mention-suggestion-item[aria-selected="true"] {
  @apply bg-accent text-accent-foreground;
}

.mention-suggestion-item[aria-disabled="true"] {
  @apply opacity-50 cursor-not-allowed;
  pointer-events: none;
}

/* Custom focus ring for better visibility */
.mention-suggestion-focus-ring {
  @apply ring-2 ring-ring ring-offset-2 ring-offset-background;
}

/* Smooth scroll behavior for keyboard navigation */
.mention-suggestion-modal.keyboard-navigation {
  scroll-behavior: smooth;
}

/* Enhanced visual feedback for touch devices */
@media (hover: none) and (pointer: coarse) {
  .mention-suggestion-item:active {
    @apply bg-accent/90 scale-[0.97];
  }
}