<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Finanzen</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="assets/styles/styles.css">

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
    <script type="module" src="assets/scripts/finanzen.js"></script>
</head>
<body>
    <div class="search-container">
        <div class="search-wrapper">
            <input type="text" id="search-input" placeholder="Durchsuchen Sie Ihre Daten...">
            <button id="search-button">Suchen</button>
        </div>
    </div>

    <div class="layout">
        <nav class="sidebar" id="sidebar">
            <div class="sidebar-content">
                <div class="logo">RMS</div>
                <ul>
                    <li><a href="home.html"><i class="fas fa-home"></i> Dashboard</a></li>
                    <li><a href="mieter.html"><i class="fas fa-users"></i> Mieter</a></li>
                    <li><a href="wohnungen.html"><i class="fas fa-building"></i> Wohnungen</a></li>
                    <li><a href="finanzen.html"><i class="fas fa-dollar-sign"></i> Finanzen</a></li>
                    <li><a href="betriebskosten.html"><i class="fas fa-calculator"></i> Betriebskosten</a></li>
                    <li><a href="to-dos.html"><i class="fas fa-project-diagram"></i> To Dos</a></li>
                </ul>
            </div>
        </nav>
        <main class="main-content">
            <header>
                <h1>Finanzen</h1>
                <div class="user-info">
                    <span id="user-email"></span>
                    <button id="logout-button">Abmelden</button>
                </div>
            </header>

            <div class="dashboard-summary">
                <div class="summary-card">
                    <h3>Einnahmen</h3>
                    <p id="total-earnings">0</p>
                </div>
                <div class="summary-card">
                    <h3>Ausgaben</h3>
                    <p id="total-cost">0 €</p>
                </div>
                <div class="summary-card">
                    <h3>Saldo</h3>
                    <p id="saldo">0 €</p>
                </div>
            </div>

            <div class="content">
                <div class="toolbar">
                    <button class="add-button" id="add-transaction-button">Transaktion hinzufügen</button>
                    <div class="filter-selects">
                        <select id="wohnung-select">
                            <option value="">Alle Wohnungen</option>
                            <!-- Optionen werden dynamisch mit JavaScript hinzugefügt -->
                        </select>
                        <select id="jahr-select">
                            <option value="">Alle Jahre</option>
                            <!-- Optionen werden dynamisch mit JavaScript hinzugefügt -->
                        </select>
                        <select id="transaktionstyp-select">
                            <option value="">Alle Transaktionen</option>
                            <option value="true">Einnahmen</option>
                            <option value="false">Ausgaben</option>
                        </select>
                    </div>
                    <input type="text" id="search-table-input" placeholder="Transaktion suchen">
                </div>
                
                
                <h2>Finanzliste</h2>
                <!-- Innerhalb der Tabelle -->
                
                <table id="transaktionen-tabelle">
                    <thead>
                        <tr>
                            <th>Wohnung</th>
                            <th>Name</th>
                            <th>Datum</th>
                            <th>Betrag</th>
                            <th>Transaktionstyp</th>
                            <th>Aktionen</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Daten werden hier dynamisch eingefügt -->
                    </tbody>
                </table>
            

                <!-- Fügen Sie dieses Modal am Ende des body-Tags hinzu -->
                <div id="bearbeiten-modal" class="modal">
                    <div class="modal-content">
                        <span class="close">&times;</span>
                        <h2>Transaktion bearbeiten</h2>
                        <form id="transaktion-bearbeiten-form">
                            <input type="hidden" id="original-transaktion-id">
                            <label for="wohnung-id">Wohnung:</label>
                            <select id="wohnung-id" required></select>
                            <label for="name">Name:</label>
                            <input type="text" id="name" required>
                            <label for="datum">Datum:</label>
                            <input type="date" id="datum" required>                            
                            <label for="ist-einnahmen">Transaktionstyp:</label>
                            <select id="ist-einnahmen" required>
                                <option value="true">Einnahme</option>
                                <option value="false">Ausgabe</option>
                            </select>
                            <label for="betrag">Betrag:</label>
                            <input type="number" id="betrag" required>
                            <label for="notizen">Notizen:</label>
                            <textarea id="notizen" rows="4"></textarea>
                            <button type="submit">Speichern</button>
                        </form>
                    </div>
                </div>


            </div>
        </main>
    </div>

    <div id="suchergebnisse-container" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Suchergebnisse</h2>
            <div id="suchergebnisse-inhalt"></div>
        </div>
    </div>


</body>

</html>